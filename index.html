
<!DOCTYPE html>
<html lang="zh-CN">
<head>
<!-- Firebase CDN -->
<script type="module">
  // Import the functions you need from the SDKs you need
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
  import { getDatabase, ref, push, set } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-database.js";

  // å…¨å±€æš´éœ²ç»™ windowï¼ŒReact æ‰èƒ½ç”¨
  window.initializeApp = initializeApp;
  window.getDatabase = getDatabase;
  window.ref = ref;
  window.push = push;
  window.set = set;
</script>

  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>éŸ©è¯­å¯¹è¯ç»ƒä¹  - ç•™å­¦ç”Ÿåœºæ™¯æ¨¡æ‹Ÿ</title>
  <script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
  <script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    @keyframes bounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
    }
    .animate-bounce {
      animation: bounce 1s infinite;
    }
  </style>
</head>
<body>
  <div id="root"></div>
  const firebaseConfig = {
  apiKey: "ä½ çš„",
  authDomain: "ä½ çš„",
  databaseURL: "ä½ çš„",
  projectId: "ä½ çš„",
  storageBucket: "ä½ çš„",
  messagingSenderId: "ä½ çš„",
  appId: "ä½ çš„",
  measurementId: "ä½ çš„"
};

// åˆå§‹åŒ– Firebase
const app = window.initializeApp(firebaseConfig);
const db = window.getDatabase(app);

  <script type="text/babel">
    const { useState } = React;

    const Home = ({ size }) => (
      <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
        <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
        <polyline points="9 22 9 12 15 12 15 22"></polyline>
      </svg>
    );

    const RotateCcw = ({ size }) => (
      <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
        <polyline points="1 4 1 10 7 10"></polyline>
        <path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"></path>
      </svg>
    );

    const Send = ({ size }) => (
      <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
        <line x1="22" y1="2" x2="11" y2="13"></line>
        <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
      </svg>
    );

    const User = ({ size }) => (
      <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
        <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
        <circle cx="12" cy="7" r="4"></circle>
      </svg>
    );

    function KoreanConversationApp() {
      const [selectedScenario, setSelectedScenario] = useState(null);
      const [messages, setMessages] = useState([]);
      const [inputText, setInputText] = useState('');
      const [isLoading, setIsLoading] = useState(false);

      const scenarios = [
        {
          id: 'landlord',
          title: 'æˆ¿ä¸œ',
          icon: 'ğŸ ',
          character: 'ê¹€ ì‚¬ì¥ë‹˜ (æˆ¿ä¸œé‡‘å…ˆç”Ÿ)',
          greeting: 'ì•ˆë…•í•˜ì„¸ìš”! ìƒˆë¡œ ì˜¤ì‹  ìœ í•™ìƒì´ì‹œì£ ? ì§‘ì— ëŒ€í•´ ì„¤ëª…í•´ë“œë¦´ê²Œìš”.',
          description: 'ç§Ÿæˆ¿ã€ç»´ä¿®ã€ç”Ÿæ´»é—®é¢˜'
        },
        {
          id: 'professor',
          title: 'æ•™æˆ',
          icon: 'ğŸ‘¨â€ğŸ«',
          character: 'ì´ êµìˆ˜ë‹˜ (ææ•™æˆ)',
          greeting: 'ì•ˆë…•í•˜ì„¸ìš”. ì´ë²ˆ í•™ê¸° ìˆ˜ì—…ì— ì˜¤ì‹  ê±¸ í™˜ì˜í•©ë‹ˆë‹¤. ì§ˆë¬¸ ìˆìœ¼ì„¸ìš”?',
          description: 'è¯¾ç¨‹å’¨è¯¢ã€ä½œä¸šé—®é¢˜'
        },
        {
          id: 'friend',
          title: 'æœ‹å‹',
          icon: 'ğŸ‘¥',
          character: 'ë¯¼ì§€ (æ•æ™º)',
          greeting: 'ì•ˆë…•! ë„ˆ ì¤‘êµ­ì—ì„œ ì˜¨ ìœ í•™ìƒì´ì§€? ìš°ë¦¬ ì¹œêµ¬í•˜ì!',
          description: 'æ—¥å¸¸èŠå¤©ã€çº¦é¥­'
        },
        {
          id: 'bank',
          title: 'é“¶è¡Œ',
          icon: 'ğŸ¦',
          character: 'ì€í–‰ ì§ì› (é“¶è¡ŒèŒå‘˜)',
          greeting: 'ì•ˆë…•í•˜ì„¸ìš”, ê³ ê°ë‹˜. ë¬´ì—‡ì„ ë„ì™€ë“œë¦´ê¹Œìš”?',
          description: 'å¼€æˆ·ã€æ±‡æ¬¾ã€å–æ¬¾'
        },
        {
          id: 'bus',
          title: 'å…¬äº¤è½¦',
          icon: 'ğŸšŒ',
          character: 'ë²„ìŠ¤ ê¸°ì‚¬ë‹˜ (å…¬äº¤å¸æœº)',
          greeting: 'ì–´ë””ê¹Œì§€ ê°€ì„¸ìš”?',
          description: 'é—®è·¯ã€è´­ç¥¨'
        },
        {
          id: 'convenience',
          title: 'ä¾¿åˆ©åº—',
          icon: 'ğŸª',
          character: 'í¸ì˜ì  ì•Œë°”ìƒ (ä¾¿åˆ©åº—å‘˜å·¥)',
          greeting: 'ì–´ì„œì˜¤ì„¸ìš”! í•„ìš”í•˜ì‹  ê±° ìˆìœ¼ì„¸ìš”?',
          description: 'è´­ç‰©ã€ä»˜æ¬¾'
        },
        {
          id: 'post',
          title: 'é‚®å±€',
          icon: 'ğŸ“®',
          character: 'ìš°ì²´êµ­ ì§ì› (é‚®å±€èŒå‘˜)',
          greeting: 'ì•ˆë…•í•˜ì„¸ìš”. ë¬´ì—‡ì„ ë„ì™€ë“œë¦´ê¹Œìš”?',
          description: 'å¯„åŒ…è£¹ã€ä¹°é‚®ç¥¨'
        },
        {
          id: 'restaurant',
          title: 'é¤å…',
          icon: 'ğŸ½ï¸',
          character: 'ì‹ë‹¹ ì§ì› (é¤å…æœåŠ¡å‘˜)',
          greeting: 'ì–´ì„œì˜¤ì„¸ìš”! ëª‡ ë¶„ì´ì„¸ìš”?',
          description: 'ç‚¹é¤ã€ç»“è´¦'
        }
      ];

      const getTranslation = (koreanText) => {
        const translations = {
          'ì•ˆë…•í•˜ì„¸ìš”! ìƒˆë¡œ ì˜¤ì‹  ìœ í•™ìƒì´ì‹œì£ ? ì§‘ì— ëŒ€í•´ ì„¤ëª…í•´ë“œë¦´ê²Œìš”.': 'ä½ å¥½ï¼ä½ æ˜¯æ–°æ¥çš„ç•™å­¦ç”Ÿå§ï¼Ÿæˆ‘ç»™ä½ ä»‹ç»ä¸€ä¸‹æˆ¿å­ã€‚',
          'ì•ˆë…•í•˜ì„¸ìš”. ì´ë²ˆ í•™ê¸° ìˆ˜ì—…ì— ì˜¤ì‹  ê±¸ í™˜ì˜í•©ë‹ˆë‹¤. ì§ˆë¬¸ ìˆìœ¼ì„¸ìš”?': 'ä½ å¥½ã€‚æ¬¢è¿æ¥åˆ°è¿™å­¦æœŸçš„è¯¾ç¨‹ã€‚æœ‰é—®é¢˜å—ï¼Ÿ',
          'ì•ˆë…•! ë„ˆ ì¤‘êµ­ì—ì„œ ì˜¨ ìœ í•™ìƒì´ì§€? ìš°ë¦¬ ì¹œêµ¬í•˜ì!': 'å—¨ï¼ä½ æ˜¯ä»ä¸­å›½æ¥çš„ç•™å­¦ç”Ÿå§ï¼Ÿæˆ‘ä»¬åšæœ‹å‹å§ï¼',
          'ì•ˆë…•í•˜ì„¸ìš”, ê³ ê°ë‹˜. ë¬´ì—‡ì„ ë„ì™€ë“œë¦´ê¹Œìš”?': 'æ‚¨å¥½ï¼Œé¡¾å®¢ã€‚éœ€è¦ä»€ä¹ˆå¸®åŠ©å—ï¼Ÿ',
          'ì–´ë””ê¹Œì§€ ê°€ì„¸ìš”?': 'æ‚¨è¦å»å“ªé‡Œï¼Ÿ',
          'ì–´ì„œì˜¤ì„¸ìš”! í•„ìš”í•˜ì‹  ê±° ìˆìœ¼ì„¸ìš”?': 'æ¬¢è¿å…‰ä¸´ï¼éœ€è¦ä»€ä¹ˆå—ï¼Ÿ',
          'ì•ˆë…•í•˜ì„¸ìš”. ë¬´ì—‡ì„ ë„ì™€ë“œë¦´ê¹Œìš”?': 'æ‚¨å¥½ã€‚éœ€è¦ä»€ä¹ˆå¸®åŠ©å—ï¼Ÿ',
          'ì–´ì„œì˜¤ì„¸ìš”! ëª‡ ë¶„ì´ì„¸ìš”?': 'æ¬¢è¿å…‰ä¸´ï¼å‡ ä½ï¼Ÿ'
        };
        return translations[koreanText] || '';
      };

      const startScenario = (scenario) => {
        setSelectedScenario(scenario);
        setMessages([
          {
            role: 'assistant',
            content: scenario.greeting,
            translation: getTranslation(scenario.greeting)
          }
        ]);
      };

      const sendMessage = async () => {
        if (!inputText.trim() || isLoading) return;

        const userMessage = {
          role: 'user',
          content: inputText
        };

        setMessages(prev => [...prev, userMessage]);
        setInputText('');
        setIsLoading(true);

        try {
          const response = await fetch('https://api.anthropic.com/v1/messages', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
            },
            body: JSON.stringify({
              model: 'claude-sonnet-4-20250514',
              max_tokens: 1000,
              messages: [
                {
                  role: 'user',
                  content: 'ä½ æ˜¯ä¸€ä¸ªéŸ©è¯­å¯¹è¯æ•™ç»ƒã€‚å½“å‰åœºæ™¯ï¼š' + selectedScenario.title + 'ï¼ˆ' + selectedScenario.character + 'ï¼‰ã€‚\n\nå­¦ç”Ÿè¯´äº†ï¼š"' + inputText + '"\n\nè¯·ä½ åšä»¥ä¸‹äº‹æƒ…ï¼š\n1. å¦‚æœå­¦ç”Ÿçš„éŸ©è¯­æœ‰è¯­æ³•é”™è¯¯ã€ç”¨è¯ä¸å½“æˆ–ä¸è‡ªç„¶ï¼Œè¯·å…ˆæŒ‡å‡ºé”™è¯¯å¹¶ç»™å‡ºæ­£ç¡®çš„è¯´æ³•\n2. ç„¶åä»¥' + selectedScenario.character + 'çš„èº«ä»½ï¼Œç”¨è‡ªç„¶çš„éŸ©è¯­å›åº”å­¦ç”Ÿ\n3. åœ¨å›åº”åæä¾›ä¸­æ–‡ç¿»è¯‘\n\nè¯·æŒ‰ä»¥ä¸‹æ ¼å¼å›å¤ï¼ˆå¦‚æœæ²¡æœ‰é”™è¯¯å°±è·³è¿‡çº é”™éƒ¨åˆ†ï¼‰ï¼š\n\nã€çº é”™ã€‘\nâŒ é”™è¯¯ï¼š[å­¦ç”Ÿçš„é”™è¯¯è¡¨è¾¾]\nâœ… æ­£ç¡®ï¼š[æ­£ç¡®çš„éŸ©è¯­è¡¨è¾¾]\nğŸ’¡ è¯´æ˜ï¼š[ç®€çŸ­è§£é‡Š]\n\nã€å›åº”ã€‘\n[éŸ©è¯­å›åº”]\n\nã€ç¿»è¯‘ã€‘\n[ä¸­æ–‡ç¿»è¯‘]\n\nä¿æŒå¯¹è¯è‡ªç„¶ã€å®ç”¨ï¼Œç¬¦åˆ' + selectedScenario.description + 'çš„åœºæ™¯ã€‚'
                }
              ]
            })
          });

          const data = await response.json();
          const aiResponse = data.content.find(item => item.type === 'text')?.text || 'ì£„ì†¡í•©ë‹ˆë‹¤. ë‹¤ì‹œ ë§ì”€í•´ì£¼ì„¸ìš”.';

          setMessages(prev => [...prev, {
            role: 'assistant',
            content: aiResponse
          }]);
        } catch (error) {
          console.error('API Error:', error);
          setMessages(prev => [...prev, {
            role: 'assistant',
            content: 'ì£„ì†¡í•©ë‹ˆë‹¤. ì ì‹œ ë¬¸ì œê°€ ìˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.\n\nã€ç¿»è¯‘ã€‘\næŠ±æ­‰ï¼Œå‡ºç°äº†é—®é¢˜ã€‚è¯·é‡è¯•ã€‚'
          }]);
        } finally {
          setIsLoading(false);
        }
      };

      const resetConversation = () => {
        setMessages([
          {
            role: 'assistant',
            content: selectedScenario.greeting,
            translation: getTranslation(selectedScenario.greeting)
          }
        ]);
        setInputText('');
      };

      const goBack = () => {
        setSelectedScenario(null);
        setMessages([]);
        setInputText('');
      };

      if (!selectedScenario) {
        return (
          <div className="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-6">
            <div className="max-w-5xl mx-auto">
              <div className="text-center mb-12">
                <h1 className="text-4xl font-bold text-gray-800 mb-3">ğŸ‡°ğŸ‡· éŸ©è¯­å¯¹è¯ç»ƒä¹ </h1>
                <p className="text-lg text-gray-600">ç•™å­¦ç”Ÿåœºæ™¯æ¨¡æ‹Ÿ - AIå®æ—¶çº é”™ä¸å¯¹è¯</p>
              </div>

              <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                {scenarios.map(scenario => (
                  <div
                    key={scenario.id}
                    onClick={() => startScenario(scenario)}
                    className="bg-white rounded-xl shadow-lg hover:shadow-2xl transition-all duration-300 cursor-pointer transform hover:-translate-y-2 p-6"
                  >
                    <div className="text-5xl mb-4 text-center">{scenario.icon}</div>
                    <h3 className="text-xl font-bold text-gray-800 mb-2 text-center">{scenario.title}</h3>
                    <p className="text-sm text-gray-600 mb-3 text-center">{scenario.character}</p>
                    <p className="text-xs text-gray-500 text-center">{scenario.description}</p>
                  </div>
                ))}
              </div>

              <div className="mt-12 bg-white rounded-xl shadow-lg p-6">
                <h2 className="text-2xl font-bold text-gray-800 mb-4">ğŸ’¡ ä½¿ç”¨è¯´æ˜</h2>
                <div className="space-y-3 text-gray-700">
                  <p>â€¢ é€‰æ‹©ä¸€ä¸ªåœºæ™¯å¼€å§‹å¯¹è¯ç»ƒä¹ </p>
                  <p>â€¢ ç”¨éŸ©è¯­è¾“å…¥ä½ æƒ³è¯´çš„è¯ï¼ŒAIä¼šæ‰®æ¼”åœºæ™¯ä¸­çš„è§’è‰²å›åº”ä½ </p>
                  <p>â€¢ å¦‚æœä½ çš„éŸ©è¯­æœ‰é”™è¯¯ï¼ŒAIä¼šå…ˆçº æ­£ï¼Œç„¶åå†å›åº”</p>
                  <p>â€¢ æ¯ä¸ªå›åº”éƒ½ä¼šæä¾›ä¸­æ–‡ç¿»è¯‘å¸®åŠ©ç†è§£</p>
                  <p>â€¢ ç‚¹å‡»"é‡æ–°å¼€å§‹"å¯ä»¥é‡ç½®å½“å‰åœºæ™¯çš„å¯¹è¯</p>
                </div>
              </div>
            </div>
          </div>
        );
      }

      return (
        <div className="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex flex-col">
          <div className="bg-white shadow-md p-4">
            <div className="max-w-4xl mx-auto flex items-center justify-between">
              <button
                onClick={goBack}
                className="flex items-center gap-2 text-gray-600 hover:text-gray-800 transition-colors"
              >
                <Home size={20} />
                <span>è¿”å›åœºæ™¯é€‰æ‹©</span>
              </button>
              <div className="flex items-center gap-3">
                <span className="text-3xl">{selectedScenario.icon}</span>
                <div>
                  <h2 className="text-xl font-bold text-gray-800">{selectedScenario.title}</h2>
                  <p className="text-sm text-gray-600">{selectedScenario.character}</p>
                </div>
              </div>
              <button
                onClick={resetConversation}
                className="flex items-center gap-2 bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors"
              >
                <RotateCcw size={18} />
                <span>é‡æ–°å¼€å§‹</span>
              </button>
            </div>
          </div>

          <div className="flex-1 overflow-y-auto p-6">
            <div className="max-w-4xl mx-auto space-y-4">
              {messages.map((msg, idx) => (
                <div
                  key={idx}
                  className={msg.role === 'user' ? 'flex justify-end' : 'flex justify-start'}
                >
                  <div
                    className={msg.role === 'user' ? 'max-w-2xl rounded-2xl p-4 bg-indigo-600 text-white' : 'max-w-2xl rounded-2xl p-4 bg-white text-gray-800 shadow-md'}
                  >
                    {msg.role === 'assistant' && (
                      <div className="flex items-center gap-2 mb-2">
                        <User size={18} />
                        <span className="font-semibold text-sm text-indigo-600">
                          {selectedScenario.character}
                        </span>
                      </div>
                    )}
                    <div className="whitespace-pre-wrap leading-relaxed">{msg.content}</div>
                    {msg.translation && (
                      <div className="mt-2 pt-2 border-t border-gray-200 text-sm text-gray-600">
                        {msg.translation}
                      </div>
                    )}
                  </div>
                </div>
              ))}
              {isLoading && (
                <div className="flex justify-start">
                  <div className="bg-white rounded-2xl p-4 shadow-md">
                    <div className="flex gap-2">
                      <div className="w-2 h-2 bg-indigo-600 rounded-full animate-bounce"></div>
                      <div className="w-2 h-2 bg-indigo-600 rounded-full animate-bounce" style={{animationDelay: '0.2s'}}></div>
                      <div className="w-2 h-2 bg-indigo-600 rounded-full animate-bounce" style={{animationDelay: '0.4s'}}></div>
                    </div>
                  </div>
                </div>
              )}
            </div>
          </div>

          <div className="bg-white border-t border-gray-200 p-4">
            <div className="max-w-4xl mx-auto flex gap-3">
              <input
                type="text"
                value={inputText}
                onChange={(e) => setInputText(e.target.value)}
                onKeyPress={(e) => e.key === 'Enter' && sendMessage()}
                placeholder="ç”¨éŸ©è¯­è¾“å…¥ä½ æƒ³è¯´çš„è¯..."
                className="flex-1 px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"
                disabled={isLoading}
              />
              <button
                onClick={sendMessage}
                disabled={isLoading || !inputText.trim()}
                className="bg-indigo-600 text-white px-6 py-3 rounded-lg hover:bg-indigo-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center gap-2"
              >
                <Send size={20} />
                <span>å‘é€</span>
              </button>
            </div>
          </div>
        </div>
      );
    }

    ReactDOM.render(<KoreanConversationApp />, document.getElementById('root'));
  </script>
</body>
</html>